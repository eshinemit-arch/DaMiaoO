/*
 * @theme damiaoo
 * DaMiaoo PPT 主题 - 现代商务风格
 *
 * 一个基于 Marp 的演示文稿主题，旨在提供清晰、现代且具有强冲击力的视觉体验。
 * 遵循 UI/UX Pro Max 规范，优化了阅读层次感与跨端显示效果。
 */

@import 'default';

/* =========================================
   全局变量与设计令牌 (Global Tokens)
   ========================================= */
section {
  /* 极致调色盘 - 基于 HSL 以确保色彩和谐度 */
  --color-primary: #003E7E;
  /* 品牌主色：深海蓝 */
  --color-secondary: #001A33;
  /* 品牌辅色：极夜蓝 */
  --color-accent: #f05a28;
  /* 核心强调：极客橙 */
  --color-accent-soft: rgba(240, 90, 40, 0.15);
  --color-text-main: #1d1d1f;
  /* 苹果级深灰 */
  --color-text-muted: #86868b;
  /* 具有设计感的灰色 */
  --color-bg-base: #fbfbfd;
  /* 基础灰白色 */
  --color-bg-surface: #ffffff;
  /* 纯白卡片面 */

  /* 现代文字排版 */
  --font-family: 'Inter', 'SF Pro Display', 'PingFang SC', 'Helvetica Neue', sans-serif;
  --font-title: 'SF Pro Display', 'PingFang SC', 'PingFang SC Semibold', sans-serif;

  /* 几何与投影 - 遵循 UI/UX Pro Max 柔和法则 */
  --radius-xl: 32px;
  --radius-lg: 20px;
  --radius-md: 12px;
  --radius-sm: 8px;

  /* 多层级阴影系统：创造深度感而不显沉重 */
  --shadow-sm: 0 4px 12px rgba(0, 0, 0, 0.03);
  --shadow-md: 0 12px 24px rgba(0, 31, 63, 0.05);
  --shadow-lg: 0 24px 48px rgba(0, 31, 63, 0.08);
  --shadow-inner: inset 0 2px 4px rgba(0, 0, 0, 0.05);

  /* 核心布局令牌 - 垂直与水平安全区对齐 */
  --safe-area-x: 100px;
  --safe-area-y: 80px;

  font-family: var(--font-family);
  color: var(--color-text-main);
  background-color: var(--color-bg-base);
  font-size: 28px;
  padding: var(--safe-area-y) var(--safe-area-x);
  display: flex;
  flex-direction: column;
  justify-content: flex-start;
  transition: all 0.3s ease;
  /* 顺滑切换 */
}

/* =========================================
   文字系统 (Typography)
   ========================================= */
h1,
h2,
h3,
h4,
h5,
h6 {
  font-family: var(--font-title);
  color: var(--color-primary);
  margin: 0 0 0.5em 0;
  line-height: 1.25;
  letter-spacing: -0.02em;
}

/* 默认标题样式：所有标题在幻灯片中默认作为子标题显示 */
:is(h1, h2, h3, h4, h5, h6) {
  font-size: 1.4em;
  font-weight: 600;
  color: var(--color-text-main);
}

/* 自动升格特性：每页首个标题自动转换为“大标题”视觉表现 */
section> :is(h1, h2, h3, h4, h5, h6):first-of-type {
  font-size: 2.2em;
  font-weight: 800;
  position: relative;
  padding-bottom: 20px;
  color: var(--color-primary);
}

/* 大标题底部的装饰线条 */
section> :is(h1, h2, h3, h4, h5, h6):first-of-type::after {
  content: '';
  position: absolute;
  left: 0;
  bottom: 0;
  width: 60px;
  height: 6px;
  background-color: var(--color-accent);
  border-radius: 3px;
}

p {
  line-height: 1.6;
  margin-bottom: 1em;
}

/* 强调内容样式 */
b,
strong {
  color: var(--color-accent) !important;
  font-weight: 800 !important;
}

/* =========================================
   列表样式 (Lists)
   ========================================= */
ul,
ol {
  padding-left: 1.2em;
  line-height: 1.8;
}

li {
  margin-bottom: 0.5em;
}

li::marker {
  color: var(--color-primary);
  font-weight: bold;
  font-size: 1.2em;
}

/* =========================================
   页眉与页脚 (Header/Footer)
   ========================================= */
header {
  position: absolute;
  top: 40px;
  left: var(--safe-area-x);
  right: var(--safe-area-x);
  color: var(--color-text-muted);
  font-size: 0.45em;
  font-weight: 700;
  letter-spacing: 0.1em;
  text-transform: uppercase;
  border-bottom: 2px solid rgba(0, 0, 0, 0.03);
  padding-bottom: 8px;
  z-index: 100;
}

footer {
  position: absolute;
  bottom: 40px;
  left: var(--safe-area-x);
  color: var(--color-text-muted);
  font-size: 0.45em;
  font-weight: 500;
  letter-spacing: 0.02em;
  z-index: 100;
}

/* 页码样式 - 增强对比度与位置 */
section::after {
  content: counter(page);
  position: absolute;
  bottom: 40px;
  right: 40px;
  color: var(--color-text-muted);
  font-size: 0.45em;
  font-weight: 700;
  background: rgba(0, 0, 0, 0.04);
  padding: 4px 12px;
  border-radius: 20px;
  z-index: 100;
}

/* 封面页与篇章页隐藏基础页眉页脚与页码，保持视觉纯净 */
section:is(.cover, .chapter) header,
section:is(.cover, .chapter) footer,
section:is(.cover, .chapter)::after {
  display: none !important;
}

/* =========================================
   页面版式：COVER (首页封面与尾页)
   ========================================= */
section.cover {
  background-color: var(--color-primary);
  /* 使用叠加渐变创造深度感 */
  background-image:
    radial-gradient(at 0% 0%, rgba(0, 62, 126, 0.5) 0%, transparent 50%),
    radial-gradient(at 100% 100%, rgba(240, 90, 40, 0.1) 0%, transparent 50%),
    linear-gradient(135deg, var(--color-primary) 0%, var(--color-secondary) 100%);
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  padding: 80px var(--safe-area-x);
  text-align: center;
}

/* 封面页隐藏基础页眉页脚 */
section.cover header,
section.cover footer,
section.cover::after {
  display: none !important;
}

/* 封面标题卡片 (Title Card) */
section.cover .title {
  background: rgba(255, 255, 255, 0.95);
  color: var(--color-primary);
  padding: 60px 80px 70px 80px;
  margin: 0;
  border-radius: 30px;
  font-size: 3.5em;
  font-weight: 800;
  width: 1150px;
  box-sizing: border-box;
  z-index: 2;
  position: relative;
  box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
  border-bottom: none;
}

/* 封面标题装饰线 */
section.cover .title::after {
  content: '';
  display: block;
  position: absolute;
  left: 50%;
  transform: translateX(-50%);
  bottom: 25px;
  width: 150px;
  height: 6px;
  background-color: var(--color-accent);
  border-radius: 3px;
}

/* 演讲者信息胶囊 (Author Capsule) */
section.cover .author {
  background: rgba(255, 255, 255, 0.92);
  color: var(--color-text-main);
  padding: 12px 45px;
  margin: auto 0 15px 0;
  border-radius: 50px;
  font-size: 1.4em;
  font-weight: 500;
  width: auto;
  box-sizing: border-box;
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
  z-index: 2;
  position: relative;
  border: none;
}

section.cover .author::after {
  display: none;
}

/* 日期与会议信息 (Date Metadata) */
section.cover .date {
  color: rgba(255, 255, 255, 0.95);
  font-size: 1.15em;
  font-weight: 400;
  margin-top: 0;
  padding-bottom: 40px;
  width: 100%;
  border: none;
}

section.cover .date::after {
  display: none;
}

/* =========================================
   页面版式：FOCUS (大字强调页面)
   ========================================= */
section.focus {
  background-color: var(--color-primary);
  background-image: radial-gradient(circle at top right, var(--color-secondary), var(--color-primary));
  color: white;
  justify-content: center;
  align-items: flex-start;
}

section.focus :is(h1, h2, h3, h4, h5, h6):nth-of-type(1),
section.focus :is(h1, h2, h3, h4, h5, h6):nth-of-type(2),
section.focus :is(h1, h2, h3, h4, h5, h6):nth-of-type(3),
section.focus p,
section.focus li {
  color: white;
}

section.focus :is(h1, h2, h3, h4, h5, h6):nth-of-type(1)::after {
  background-color: var(--color-accent);
}

section.focus header,
section.focus footer,
section.focus::after {
  color: rgba(255, 255, 255, 0.5);
  border-bottom-color: rgba(255, 255, 255, 0.1);
}

section.focus li::marker {
  color: var(--color-accent);
}

/* =========================================
   页面版式：SPLIT (左右图文分栏布局)
   ========================================= */
section.split {
  display: grid;
  grid-template-columns: 1fr 1.1fr;
  /* 略微不对称，增加视觉动感 */
  grid-template-rows: auto 1fr;
  column-gap: 80px;
  align-content: center;
}

section.split> :is(h1, h2, h3, h4, h5, h6):nth-of-type(1) {
  grid-column: 1 / -1;
  grid-row: 1;
  margin-bottom: 50px;
  text-align: left;
}

/* 图片区域处理 */
section.split>*:has(img),
section.split>img {
  grid-column: 2;
  grid-row: 2 / 10;
  margin: 0;
  display: flex;
  justify-content: center;
  align-items: center;
  height: 100%;
}

section.split img {
  width: 100%;
  height: 100%;
  max-height: 500px;
  object-fit: cover;
  border-radius: var(--radius-md);
  box-shadow: var(--shadow-md);
}

section.split.gap-small {
  column-gap: 40px;
}

/* =========================================
   数据表格样式 (Tables)
   ========================================= */
table {
  width: 100%;
  border-collapse: separate;
  border-spacing: 0;
  margin-top: 1em;
  background: var(--color-bg-surface);
  border-radius: var(--radius-md);
  overflow: hidden;
  box-shadow: var(--shadow-sm);
  border: 1px solid #eaeaea;
}

th {
  background-color: #f4f5f7;
  color: var(--color-primary);
  font-weight: 600;
  padding: 18px 24px;
  text-align: left;
  border-bottom: 2px solid #eaeaea;
}

td {
  padding: 16px 24px;
  border-bottom: 1px solid #f0f0f0;
  color: var(--color-text-main);
}

tr:last-child td {
  border-bottom: none;
}

tr:hover td {
  background-color: #fcfcfd;
}

/* =========================================
   引用块样式 (Blockquotes)
   ========================================= */
blockquote {
  margin: 1.5em 0;
  padding: 1.5em 2em;
  background: var(--color-bg-surface);
  border-left: 6px solid var(--color-accent);
  border-radius: 0 var(--radius-md) var(--radius-md) 0;
  box-shadow: var(--shadow-sm);
}

blockquote p {
  font-size: 1.25em;
  font-style: italic;
  color: var(--color-secondary);
  margin: 0;
}

/* =========================================
   通用图像样式 (Images)
   ========================================= */
img {
  border-radius: var(--radius-md);
  max-width: 100%;
}

img[alt~="shadow"] {
  box-shadow: var(--shadow-md);
}

img[alt~="center"] {
  display: block;
  margin: 0 auto;
}

/* =========================================
   代码块样式 (Code Blocks)
   ========================================= */
pre {
  background: #1e1e1e;
  border-radius: var(--radius-md);
  padding: 1.5em;
  box-shadow: var(--shadow-md);
  overflow-x: auto;
}

pre code {
  color: #d4d4d4;
  background: transparent;
  padding: 0;
}

code {
  font-family: 'Consolas', 'Fira Code', monospace;
  color: var(--color-accent);
  background: rgba(240, 90, 40, 0.1);
  padding: 0.1em 0.3em;
  border-radius: 4px;
  font-size: 0.85em;
}

/* =========================================
   页面版式：QUOTE (金句/引言专题页)
   ========================================= */
section.quote {
  background-color: var(--color-bg-base);
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  text-align: center;
}

section.quote :is(h1, h2, h3, h4, h5, h6):nth-of-type(1) {
  font-size: 2.8em;
  font-weight: 800;
  color: var(--color-primary);
  line-height: 1.4;
  position: relative;
  padding: 0 40px;
  margin-bottom: 0px;
  opacity: 0.8;
}

/* 巨型引号前缀 */
section.quote :is(h1, h2, h3, h4, h5, h6):nth-of-type(1)::before {
  content: "\201C";
  position: absolute;
  top: -40px;
  left: -20px;
  font-size: 3em;
  color: var(--color-accent);
  opacity: 0.3;
  font-family: Georgia, serif;
}

section.quote :is(h1, h2, h3, h4, h5, h6):nth-of-type(1)::after {
  display: none;
  /* 隐藏默认下划线 */
}

section.quote p {
  font-size: 1.4em;
  color: var(--color-text-muted);
  font-weight: 600;
  margin-top: 20px;
  border-left: none;
}

/* =========================================
   页面版式：CARDS (三列特征卡片页)
   ========================================= */
section.cards {
  display: flex;
  flex-direction: column;
  justify-content: flex-start;
}

/* 将 cards 布局下的 ul 元素转换为 CSS 网格 */
section.cards ul {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 30px;
  padding: 0;
  margin-top: 40px;
  list-style: none;
  /* 移除列表项符号 */
}

section.cards ul li {
  background: var(--color-bg-surface);
  padding: 40px 30px;
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-md);
  display: flex;
  flex-direction: column;
  align-items: center;
  text-align: center;
  border: 1px solid rgba(0, 0, 0, 0.03);
  position: relative;
  transition: transform 0.3s cubic-bezier(0.2, 0.8, 0.2, 1), box-shadow 0.3s ease;
  border-top: 4px solid var(--color-accent);
}

section.cards ul li:hover {
  transform: translateY(-8px);
  box-shadow: var(--shadow-lg);
  border-color: var(--color-accent-soft);
}

section.cards ul li::marker {
  display: none;
}

/* 将 li 中的首个 strong 元素识别为卡片标题 */
section.cards ul li strong {
  font-size: 1.4em;
  color: var(--color-primary) !important;
  margin-bottom: 15px;
  display: block;
}

/* =========================================
   页面版式：METRIC (核心经营指标页)
   ========================================= */
section.metric {
  background-color: var(--color-primary);
  color: white;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  text-align: center;
}

/* 指标数字显示（支持超大号字体） */
section.metric :is(h1, h2, h3, h4, h5, h6):nth-of-type(1) {
  color: var(--color-accent);
  font-size: 8em;
  font-weight: 800;
  line-height: 1;
  margin: 0;
  padding: 0;
  text-shadow: var(--shadow-md);
}

section.metric :is(h1, h2, h3, h4, h5, h6):nth-of-type(1)::after {
  display: none;
}

/* 指标描述文字 */
section.metric :is(h1, h2, h3, h4, h5, h6):nth-of-type(2) {
  color: white;
  font-size: 2em;
  font-weight: 400;
  margin-top: 20px;
  opacity: 0.9;
}

/* =========================================
   网格布局系统 (GRID SYSTEM - 灵活的多列展示)
   ========================================= */

/* 共享容器逻辑 */
section:is(.cols3, .cols4, .cols5, .cols6) {
  display: flex;
  flex-direction: column;
  justify-content: flex-start;
}

section:is(.cols3, .cols4, .cols5, .cols6) ul,
section:is(.cols3, .cols4, .cols5, .cols6) ol {
  display: grid;
  gap: 20px;
  padding: 0;
  margin-top: 30px;
  list-style: none;
  width: 100%;
}

/* 列表项作为内容卡片 */
section:is(.cols3, .cols4, .cols5, .cols6) ul li,
section:is(.cols3, .cols4, .cols5, .cols6) ol li {
  background: var(--color-bg-surface);
  padding: 24px;
  border-radius: var(--radius-sm);
  box-shadow: var(--shadow-sm);
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  text-align: left;
  border-top: 4px solid var(--color-primary);
  font-size: 0.8em;
}

section:is(.cols3, .cols4, .cols5, .cols6) ul li::marker,
section:is(.cols3, .cols4, .cols5, .cols6) ol li::marker {
  display: none;
}

section:is(.cols3, .cols4, .cols5, .cols6) ul li strong,
section:is(.cols3, .cols4, .cols5, .cols6) ol li strong {
  font-size: 1.3em;
  color: var(--color-primary) !important;
  margin-bottom: 10px;
  display: block;
}

/* 3列布局扩展 */
section.cols3 ul,
section.cols3 ol {
  grid-template-columns: repeat(3, 1fr);
}

section.cols3 ul li {
  border-top-color: var(--color-accent);
}

/* 4列布局扩展 */
section.cols4 ul,
section.cols4 ol {
  grid-template-columns: repeat(4, 1fr);
  gap: 15px;
}

section.cols4 ul li {
  padding: 20px 15px;
  font-size: 0.75em;
  border-top-color: #0055A4;
}

/* 5列递进布局 (带方向性箭头) */
section.cols5 ul,
section.cols5 ol {
  grid-template-columns: repeat(5, 1fr);
  gap: 10px;
  align-items: stretch;
  position: relative;
}

section.cols5 ul li {
  padding: 15px 12px;
  font-size: 0.65em;
  border-top: none;
  border-bottom: 4px solid var(--color-accent);
  position: relative;
}

/* 流程图风格的递进箭头引导 */
section.cols5 ul li:not(:last-child)::after {
  content: '>';
  position: absolute;
  right: -15px;
  top: 50%;
  transform: translateY(-50%);
  color: var(--color-text-muted);
  font-weight: bold;
  font-size: 2em;
  z-index: 10;
}

/* 6项矩阵布局 (3x2 结构) */
section.cols6 ul,
section.cols6 ol {
  grid-template-columns: repeat(3, 1fr);
  grid-template-rows: repeat(2, auto);
  gap: 20px;
}

section.cols6 ul li {
  border-left: 4px solid var(--color-secondary);
  border-top: none;
  padding: 15px 20px;
  font-size: 0.7em;
}

/* =========================================
   页面版式：TOC (目录页)
   ========================================= */
section.toc {
  display: flex;
  flex-direction: column;
  justify-content: flex-start;
  /* 对齐常规页面：顶部起始 */
  background-color: var(--color-primary);
  background-image: linear-gradient(135deg, var(--color-primary) 0%, var(--color-secondary) 100%);
  color: white;
  padding: var(--safe-area-y) var(--safe-area-x);
  /* 确保四周留白与标准页一致 */
}

section.toc :is(h1, h2, h3, h4, h5, h6):nth-of-type(1) {
  font-size: 2.8em;
  margin-bottom: 20px;
  /* 缩短与下方内容的距离 */
  position: relative;
  border: none;
  color: white;
  text-align: left;
}

section.toc :is(h1, h2, h3, h4, h5, h6):nth-of-type(1)::after {
  display: none;
}

section.toc ol {
  list-style: none;
  padding: 0;
  display: grid;
  grid-template-columns: 1fr 1fr;
  align-items: stretch;
  /* 原生对齐：让同一行的盒子高度自然一致 */
  gap: 20px;
  width: 100%;
  margin-top: 10px;
}

/* 支持断点续接的计数器逻辑 (由 builder.js 自动生成) */
section.toc ol {
  counter-reset: toc-counter var(--toc-start, 0);
}

section.toc ol li {
  counter-increment: toc-counter;
  font-size: 1.25em;
  font-weight: 500;
  color: white;
  background: rgba(255, 255, 255, 0.08);
  padding: 20px 28px;
  /* 显著减小间距，降低高度 */
  border-radius: var(--radius-md);
  display: flex;
  align-items: center;
  /* 垂直居中，适合 1-2 行内容 */
  border: 1px solid rgba(255, 255, 255, 0.1);
  backdrop-filter: blur(12px);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.15);
  transition: all 0.3s ease;
  min-height: 90px;
  /* 紧凑保底高度 */
  box-sizing: border-box;
}

section.toc ol li:hover {
  background: rgba(255, 255, 255, 0.15);
  transform: scale(1.02);
}

/* 目录页巨大的视觉装饰数字索引 */
section.toc ol li::before {
  content: counter(toc-counter, decimal-leading-zero);
  color: white;
  font-size: 2.5em;
  font-weight: 900;
  margin-right: 25px;
  opacity: 0.15;
  font-family: 'Arial Black', sans-serif;
  letter-spacing: -2px;
}

/* =========================================
   页面版式：CHAPTER (篇章/过渡分节页)
   ========================================= */
section.chapter {
  background-color: var(--color-primary);
  background-image: linear-gradient(135deg, var(--color-primary) 0%, var(--color-secondary) 100%);
  color: white;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: flex-start;
  padding: 80px var(--safe-area-x);
  position: relative;
  overflow: hidden;
}

/* 篇章页背景的极简几何装饰 */
section.chapter::before {
  content: "";
  position: absolute;
  right: -50px;
  bottom: -50px;
  width: 400px;
  height: 400px;
  background: radial-gradient(circle, rgba(255, 255, 255, 0.05) 0%, rgba(255, 255, 255, 0) 70%);
  border-radius: 50%;
  z-index: 0;
}

section.chapter>* {
  z-index: 1;
  position: relative;
}

/* 章节大标题 */
section.chapter :is(h1, h2, h3, h4, h5, h6):nth-of-type(1) {
  color: white;
  font-size: 4.5em;
  /* 进一步增大以增强冲击力 */
  border-left: 16px solid var(--color-accent);
  padding-left: 48px;
  margin: 0;
  font-weight: 900;
  letter-spacing: -1px;
  text-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
}

section.chapter :is(h1, h2, h3, h4, h5, h6):nth-of-type(1)::after {
  display: none;
}

/* 章节副标题 */
section.chapter :is(h1, h2, h3, h4, h5, h6):nth-of-type(2) {
  font-size: 2em;
  color: rgba(255, 255, 255, 0.9);
  margin-top: 20px;
  margin-left: 64px;
  /* 对齐大标题文字起始位 (16px border + 48px padding) */
  font-weight: 300;
  max-width: 100%;
}

/* 章节描述性短语 */
section.chapter p {
  font-size: 1.2em;
  color: rgba(255, 255, 255, 0.6);
  margin-top: 40px;
  margin-left: 64px;
  /* 同样对齐 */
  max-width: 90%;
  /* 放宽限制，避免不必要的换行 */
}